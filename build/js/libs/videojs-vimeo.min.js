!function e(t,n,o){function r(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return r(n?n:e)},f,f.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){(function(e){!function(e,o){"object"==typeof n&&"undefined"!=typeof t?t.exports=o():"function"==typeof define&&define.amd?define(o):(e.Vimeo=e.Vimeo||{},e.Vimeo.Player=o())}(this,function(){"use strict";function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e,t,n){var o=E.get(e.element)||{};t in o||(o[t]=[]),o[t].push(n),E.set(e.element,o)}function o(e,t){var n=E.get(e.element)||{};return n[t]||[]}function r(e,t,n){var o=E.get(e.element)||{};if(!o[t])return!0;if(!n)return o[t]=[],E.set(e.element,o),!0;var r=o[t].indexOf(n);return r!==-1&&o[t].splice(r,1),E.set(e.element,o),o[t]&&0===o[t].length}function i(e,t){var n=E.get(e);E.set(t,n),E.delete(e)}function a(e,t){return 0===e.indexOf(t.toLowerCase())?e:""+t.toLowerCase()+e.substr(0,1).toUpperCase()+e.substr(1)}function u(e){return e instanceof window.HTMLElement}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function c(e){return/^(https?:)?\/\/(player.)?vimeo.com(?=$|\/)/.test(e)}function f(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.id,n=e.url,o=t||n;if(!o)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(s(o))return"https://vimeo.com/"+o;if(c(o))return o.replace("http:","https:");if(t)throw new TypeError("“"+t+"” is not a valid video id.");throw new TypeError("“"+o+"” is not a vimeo.com url.")}function l(e){for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=S,o=Array.isArray(n),r=0,n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if(r=n.next(),r.done)break;i=r.value}var a=i,u=e.getAttribute("data-vimeo-"+a);(u||""===u)&&(t[a]=""===u?1:u)}return t}function p(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new Promise(function(n,o){if(!c(e))throw new TypeError("“"+e+"” is not a vimeo.com url.");var r="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e);for(var i in t)t.hasOwnProperty(i)&&(r+="&"+i+"="+encodeURIComponent(t[i]));var a="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;a.open("GET",r,!0),a.onload=function(){if(404===a.status)return void o(new Error("“"+e+"” was not found."));if(403===a.status)return void o(new Error("“"+e+"” is not embeddable."));try{var t=JSON.parse(a.responseText);n(t)}catch(e){o(e)}},a.onerror=function(){var e=a.status?" ("+a.status+")":"";o(new Error("There was an error fetching the embed code from Vimeo"+e+"."))},a.send()})}function h(e,t){var n=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var o=document.createElement("div");return o.innerHTML=n,t.appendChild(o.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function d(){var e=arguments.length<=0||void 0===arguments[0]?document:arguments[0],t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: "+e)},o=function(){if(i){if(a>=r.length)return"break";u=r[a++]}else{if(a=r.next(),a.done)return"break";u=a.value}var e=u;try{if(null!==e.getAttribute("data-vimeo-defer"))return"continue";var t=l(e),o=f(t);p(o,t).then(function(t){return h(t,e)}).catch(n)}catch(e){n(e)}};e:for(var r=t,i=Array.isArray(r),a=0,r=i?r:r[Symbol.iterator]();;){var u,s=o();switch(s){case"break":break e;case"continue":continue}}}function y(e){return"string"==typeof e&&(e=JSON.parse(e)),e}function v(e,t,n){if(e.element.contentWindow.postMessage){var o={method:t};void 0!==n&&(o.value=n);var r=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));r>=8&&r<10&&(o=JSON.stringify(o)),e.element.contentWindow.postMessage(o,e.origin)}}function m(e,t){t=y(t);var n=[],i=void 0;if(t.event){if("error"===t.event)for(var a=o(e,t.data.method),u=a,s=Array.isArray(u),c=0,u=s?u:u[Symbol.iterator]();;){var f;if(s){if(c>=u.length)break;f=u[c++]}else{if(c=u.next(),c.done)break;f=c.value}var l=f,p=new Error(t.data.message);p.name=t.data.name,l.reject(p),r(e,t.data.method,l)}n=o(e,"event:"+t.event),i=t.data}else t.method&&(n=o(e,t.method),i=t.value,r(e,t.method));for(var h=n,d=Array.isArray(h),v=0,h=d?h:h[Symbol.iterator]();;){var m;if(d){if(v>=h.length)break;m=h[v++]}else{if(v=h.next(),v.done)break;m=v.value}var g=m;try{if("function"==typeof g){g.call(e,i);continue}g.resolve(i)}catch(e){}}}var g="undefined"!=typeof Array.prototype.indexOf,w="undefined"!=typeof window.postMessage;if(!g||!w)throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var _="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},b=(t(function(e,t){!function(e){function t(e,t){function o(e){return this&&this.constructor===o?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,void(e&&n.call(this,e))):new o(e)}return t||w(e,"size",{get:v}),e.constructor=o,o.prototype=e,o}function n(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}function o(e){return this.has(e)&&(this._keys.splice(g,1),this._values.splice(g,1),this._itp.forEach(function(e){g<e[0]&&e[0]--})),-1<g}function r(e){return this.has(e)?this._values[g]:void 0}function i(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(g=e.length;g--&&!_(e[g],t););else g=e.indexOf(t);return-1<g}function a(e){return i.call(this,this._values,e)}function u(e){return i.call(this,this._keys,e)}function s(e,t){return this.has(e)?this._values[g]=t:this._values[this._keys.push(e)-1]=t,this}function c(e){return this.has(e)||this._values.push(e),this}function f(){(this._keys||0).length=this._values.length=0}function l(){return y(this._itp,this._keys)}function p(){return y(this._itp,this._values)}function h(){return y(this._itp,this._keys,this._values)}function d(){return y(this._itp,this._values,this._values)}function y(e,t,n){var o=[0],r=!1;return e.push(o),{next:function(){var i,a=o[0];return!r&&a<t.length?(i=n?[t[a],n[a]]:t[a],o[0]++):(r=!0,e.splice(e.indexOf(o),1)),{done:r,value:i}}}}function v(){return this._values.length}function m(e,t){for(var n=this.entries();;){var o=n.next();if(o.done)break;e.call(t,o.value[1],o.value[0],this)}}var g,w=Object.defineProperty,_=function(e,t){return e===t||e!==e&&t!==t};"undefined"==typeof WeakMap&&(e.WeakMap=t({delete:o,clear:f,get:r,has:u,set:s},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=t({delete:o,has:u,get:r,set:s,keys:l,values:p,entries:h,forEach:m,clear:f})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=t({has:a,add:c,delete:o,clear:f,keys:p,values:p,entries:d,forEach:m})),"undefined"==typeof WeakSet&&(e.WeakSet=t({delete:o,add:c,clear:f,has:a},!0))}("undefined"!=typeof t&&"undefined"!=typeof _?_:window)}),t(function(e){!function(t,n,o){n[t]=n[t]||o(),"undefined"!=typeof e&&e.exports?e.exports=n[t]:"function"==typeof define&&define.amd&&define(function(){return n[t]})}("Promise","undefined"!=typeof _?_:_,function(){function e(e,t){p.add(e,t),l||(l=d(p.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)o(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function o(e,n,o){var r,i;try{n===!1?o.reject(e.msg):(r=n===!0?e.msg:n.call(void 0,e.msg),r===o.promise?o.reject(TypeError("Promise-chain cycle")):(i=t(r))?i.call(r,o.resolve,o.reject):o.resolve(r))}catch(e){o.reject(e)}}function r(o){var a,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(a=t(o))?e(function(){var e=new u(s);try{a.call(o,function(){r.apply(e,arguments)},function(){i.apply(e,arguments)})}catch(t){i.call(e,t)}}):(s.msg=o,s.state=1,s.chain.length>0&&e(n,s))}catch(e){i.call(new u(s),e)}}}function i(t){var o=this;o.triggered||(o.triggered=!0,o.def&&(o=o.def),o.msg=t,o.state=2,o.chain.length>0&&e(n,o))}function a(e,t,n,o){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then(function(e){n(r,e)},o)}(r)}function u(e){this.def=e,this.triggered=!1}function s(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new s(this);this.then=function(t,r){var i={success:"function"!=typeof t||t,failure:"function"==typeof r&&r};return i.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t}),o.chain.push(i),0!==o.state&&e(n,o),i.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){r.call(o,e)},function(e){i.call(o,e)})}catch(e){i.call(o,e)}}var f,l,p,h=Object.prototype.toString,d="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),f=function(e,t,n,o){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:o!==!1})}}catch(e){f=function(e,t,n){return e[t]=n,e}}p=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,o;return{add:function(r,i){o=new e(r,i),n?n.next=o:t=o,n=o,o=void 0},drain:function(){var e=t;for(t=n=l=void 0;e;)e.fn.call(e.self),e=e.next}}}();var y=f({},"constructor",c,!1);return c.prototype=y,f(y,"__NPO__",0,!1),f(c,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),f(c,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),f(c,"all",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,o){if("function"!=typeof n||"function"!=typeof o)throw TypeError("Not a function");var r=e.length,i=Array(r),u=0;a(t,e,function(e,t){i[e]=t,++u===r&&n(i)},o)})}),f(c,"race",function(e){var t=this;return"[object Array]"!=h.call(e)?t.reject(TypeError("Not an array")):new t(function(n,o){if("function"!=typeof n||"function"!=typeof o)throw TypeError("Not a function");a(t,e,function(e,t){n(t)},o)})}),c})})),T=b&&"object"==typeof b&&"default"in b?b.default:b,E=new WeakMap,S=["id","url","width","maxwidth","height","maxheight","portrait","title","byline","color","autoplay","autopause","loop","responsive"],x=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},k=new WeakMap,j=new WeakMap,M=function(){function e(t){var n=this,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(x(this,e),window.jQuery&&t instanceof jQuery&&(t.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),t=t[0]),"string"==typeof t&&(t=document.getElementById(t)),!u(t))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==t.nodeName){var r=t.querySelector("iframe");r&&(t=r)}if("IFRAME"===t.nodeName&&!c(t.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(k.has(t))return k.get(t);this.element=t,this.origin="*";var a=new T(function(e,r){var a=function(t){if(c(t.origin)&&n.element.contentWindow===t.source){"*"===n.origin&&(n.origin=t.origin);var o=y(t.data),r="event"in o&&"ready"===o.event,i="method"in o&&"ping"===o.method;return r||i?(n.element.setAttribute("data-ready","true"),void e()):void m(n,o)}};if(window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent&&window.attachEvent("onmessage",a),"IFRAME"!==n.element.nodeName){var u=l(t,o),s=f(u);p(s,u).then(function(e){var o=h(e,t);return n.element=o,i(t,o),e}).catch(function(e){return r(e)})}});return j.set(this,a),k.set(this.element,this),"IFRAME"===this.element.nodeName&&v(this,"ping"),this}return e.prototype.then=function(e){var t=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];return this.ready().then(e,t)},e.prototype.callMethod=function(e){var t=this,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new T(function(r,i){return t.ready().then(function(){n(t,e,{resolve:r,reject:i}),v(t,e,o)})})},e.prototype.get=function(e){var t=this;return new T(function(o,r){return e=a(e,"get"),t.ready().then(function(){n(t,e,{resolve:o,reject:r}),v(t,e)})})},e.prototype.set=function(e,t){var o=this;return T.resolve(t).then(function(t){if(e=a(e,"set"),void 0===t||null===t)throw new TypeError("There must be a value to set.");return o.ready().then(function(){return new T(function(r,i){n(o,e,{resolve:r,reject:i}),v(o,e,t)})})})},e.prototype.on=function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");var r=o(this,"event:"+e);0===r.length&&this.callMethod("addEventListener",e).catch(function(){}),n(this,"event:"+e,t)},e.prototype.off=function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");var n=r(this,"event:"+e,t);n&&this.callMethod("removeEventListener",e).catch(function(e){})},e.prototype.loadVideo=function(e){return this.callMethod("loadVideo",e)},e.prototype.ready=function(){var e=j.get(this);return T.resolve(e)},e.prototype.enableTextTrack=function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})},e.prototype.disableTextTrack=function(){return this.callMethod("disableTextTrack")},e.prototype.pause=function(){return this.callMethod("pause")},e.prototype.play=function(){return this.callMethod("play")},e.prototype.unload=function(){return this.callMethod("unload")},e.prototype.getAutopause=function(){return this.get("autopause")},e.prototype.setAutopause=function(e){return this.set("autopause",e)},e.prototype.getColor=function(){return this.get("color")},e.prototype.setColor=function(e){return this.set("color",e)},e.prototype.getCurrentTime=function(){return this.get("currentTime")},e.prototype.setCurrentTime=function(e){return this.set("currentTime",e)},e.prototype.getDuration=function(){return this.get("duration")},e.prototype.getEnded=function(){return this.get("ended")},e.prototype.getLoop=function(){return this.get("loop")},e.prototype.setLoop=function(e){return this.set("loop",e)},e.prototype.getPaused=function(){return this.get("paused")},e.prototype.getTextTracks=function(){return this.get("textTracks")},e.prototype.getVideoEmbedCode=function(){return this.get("videoEmbedCode")},e.prototype.getVideoId=function(){return this.get("videoId")},e.prototype.getVideoTitle=function(){return this.get("videoTitle")},e.prototype.getVideoWidth=function(){return this.get("videoWidth")},e.prototype.getVideoHeight=function(){return this.get("videoHeight")},e.prototype.getVideoUrl=function(){return this.get("videoUrl")},e.prototype.getVolume=function(){return this.get("volume")},e.prototype.setVolume=function(e){return this.set("volume",e)},e}();return d(),M})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){if(!d){d=!0;var e="\n      .vjs-vimeo iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n    ",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}n.__esModule=!0;var s="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,c=o(s),f=e(1),l=o(f),p=c.default.getComponent("Component"),h=c.default.getComponent("Tech"),d=!1,y=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return u(),a.setPoster(n.poster),a.initVimeoPlayer(),a}return a(t,e),t.prototype.initVimeoPlayer=function(){var e=this,t={url:this.options_.source.src,byline:!1,portrait:!1,title:!1};this.options_.autoplay&&(t.autoplay=!0),this.options_.height&&(t.height=this.options_.height),this.options_.width&&(t.width=this.options_.width),this.options_.maxheight&&(t.maxheight=this.options_.maxheight),this.options_.maxwidth&&(t.maxwidth=this.options_.maxwidth),this.options_.loop&&(t.loop=this.options_.loop),this._player=new l.default(this.el(),t),this.initVimeoState(),["play","pause","ended","timeupdate","progress","seeked"].forEach(function(t){e._player.on(t,function(n){e._vimeoState.progress.duration!=n.duration&&e.trigger("durationchange"),e._vimeoState.progress=n,e.trigger(t)})}),this._player.on("pause",function(){return e._vimeoState.playing=!1}),this._player.on("play",function(){e._vimeoState.playing=!0,e._vimeoState.ended=!1}),this._player.on("ended",function(){e._vimeoState.playing=!1,e._vimeoState.ended=!0}),this._player.on("volumechange",function(t){return e._vimeoState.volume=t}),this._player.on("error",function(t){return e.trigger("error",t)}),this.triggerReady()},t.prototype.initVimeoState=function(){var e=this._vimeoState={ended:!1,playing:!1,volume:0,progress:{seconds:0,percent:0,duration:0}};this._player.getCurrentTime().then(function(t){return e.progress.seconds=t}),this._player.getDuration().then(function(t){return e.progress.duration=t}),this._player.getPaused().then(function(t){return e.playing=!t}),this._player.getVolume().then(function(t){return e.volume=t})},t.prototype.createEl=function(){var e=c.default.createEl("div",{id:this.options_.techId});return e.style.cssText="width:100%;height:100%;top:0;left:0;position:absolute",e.className="vjs-vimeo",e},t.prototype.controls=function(){return!0},t.prototype.supportsFullScreen=function(){return!0},t.prototype.src=function(){return this.options_.source},t.prototype.currentSrc=function(){return this.options_.source.src},t.prototype.currentTime=function(){return this._vimeoState.progress.seconds},t.prototype.setCurrentTime=function(e){this._player.setCurrentTime(e)},t.prototype.volume=function(){return this._vimeoState.volume},t.prototype.setVolume=function(e){return this._player.setVolume(volume)},t.prototype.duration=function(){return this._vimeoState.progress.duration},t.prototype.buffered=function(){var e=this._vimeoState.progress;return c.default.createTimeRange(0,e.percent*e.duration)},t.prototype.paused=function(){return!this._vimeoState.playing},t.prototype.pause=function(){this._player.pause()},t.prototype.play=function(){this._player.play()},t.prototype.muted=function(){return 0===this._vimeoState.volume},t.prototype.ended=function(){return this._vimeoState.ended},t}(h);y.prototype.featuresTimeupdateEvents=!0,y.isSupported=function(){return!0},h.withSourceHandlers(y),y.nativeSourceHandler={},y.nativeSourceHandler.canPlayType=function(e){return"video/vimeo"===e?"maybe":""},y.nativeSourceHandler.canHandleSource=function(e){return e.type?y.nativeSourceHandler.canPlayType(e.type):e.src?y.nativeSourceHandler.canPlayType(e.src):""},y.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)},y.nativeSourceHandler.dispose=function(){},y.registerSourceHandler(y.nativeSourceHandler),p.registerComponent("Vimeo",y),h.registerTech("Vimeo",y),y.VERSION="0.0.1",n.default=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJsaWJzL3ZpZGVvanMtdmltZW8ubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbiBlKHQsbixvKXtmdW5jdGlvbiByKGEsdSl7aWYoIW5bYV0pe2lmKCF0W2FdKXt2YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCF1JiZzKXJldHVybiBzKGEsITApO2lmKGkpcmV0dXJuIGkoYSwhMCk7dmFyIGM9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIithK1wiJ1wiKTt0aHJvdyBjLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsY312YXIgZj1uW2FdPXtleHBvcnRzOnt9fTt0W2FdWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbYV1bMV1bZV07cmV0dXJuIHIobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixvKX1yZXR1cm4gblthXS5leHBvcnRzfWZvcih2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGE9MDthPG8ubGVuZ3RoO2ErKylyKG9bYV0pO3JldHVybiByfSh7MTpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihlKXshZnVuY3Rpb24oZSxvKXtcIm9iamVjdFwiPT10eXBlb2YgbiYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQ/dC5leHBvcnRzPW8oKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKG8pOihlLlZpbWVvPWUuVmltZW98fHt9LGUuVmltZW8uUGxheWVyPW8oKSl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIHQ9e2V4cG9ydHM6e319LGUodCx0LmV4cG9ydHMpLHQuZXhwb3J0c31mdW5jdGlvbiBuKGUsdCxuKXt2YXIgbz1FLmdldChlLmVsZW1lbnQpfHx7fTt0IGluIG98fChvW3RdPVtdKSxvW3RdLnB1c2gobiksRS5zZXQoZS5lbGVtZW50LG8pfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1FLmdldChlLmVsZW1lbnQpfHx7fTtyZXR1cm4gblt0XXx8W119ZnVuY3Rpb24gcihlLHQsbil7dmFyIG89RS5nZXQoZS5lbGVtZW50KXx8e307aWYoIW9bdF0pcmV0dXJuITA7aWYoIW4pcmV0dXJuIG9bdF09W10sRS5zZXQoZS5lbGVtZW50LG8pLCEwO3ZhciByPW9bdF0uaW5kZXhPZihuKTtyZXR1cm4gciE9PS0xJiZvW3RdLnNwbGljZShyLDEpLEUuc2V0KGUuZWxlbWVudCxvKSxvW3RdJiYwPT09b1t0XS5sZW5ndGh9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPUUuZ2V0KGUpO0Uuc2V0KHQsbiksRS5kZWxldGUoZSl9ZnVuY3Rpb24gYShlLHQpe3JldHVybiAwPT09ZS5pbmRleE9mKHQudG9Mb3dlckNhc2UoKSk/ZTpcIlwiK3QudG9Mb3dlckNhc2UoKStlLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHIoMSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MRWxlbWVudH1mdW5jdGlvbiBzKGUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KGUpKSYmaXNGaW5pdGUoZSkmJk1hdGguZmxvb3IoZSk9PWV9ZnVuY3Rpb24gYyhlKXtyZXR1cm4vXihodHRwcz86KT9cXC9cXC8ocGxheWVyLik/dmltZW8uY29tKD89JHxcXC8pLy50ZXN0KGUpfWZ1bmN0aW9uIGYoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdLHQ9ZS5pZCxuPWUudXJsLG89dHx8bjtpZighbyl0aHJvdyBuZXcgRXJyb3IoXCJBbiBpZCBvciB1cmwgbXVzdCBiZSBwYXNzZWQsIGVpdGhlciBpbiBhbiBvcHRpb25zIG9iamVjdCBvciBhcyBhIGRhdGEtdmltZW8taWQgb3IgZGF0YS12aW1lby11cmwgYXR0cmlidXRlLlwiKTtpZihzKG8pKXJldHVyblwiaHR0cHM6Ly92aW1lby5jb20vXCIrbztpZihjKG8pKXJldHVybiBvLnJlcGxhY2UoXCJodHRwOlwiLFwiaHR0cHM6XCIpO2lmKHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIuKAnFwiK3QrXCLigJ0gaXMgbm90IGEgdmFsaWQgdmlkZW8gaWQuXCIpO3Rocm93IG5ldyBUeXBlRXJyb3IoXCLigJxcIitvK1wi4oCdIGlzIG5vdCBhIHZpbWVvLmNvbSB1cmwuXCIpfWZ1bmN0aW9uIGwoZSl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT97fTphcmd1bWVudHNbMV0sbj1TLG89QXJyYXkuaXNBcnJheShuKSxyPTAsbj1vP246bltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGk7aWYobyl7aWYocj49bi5sZW5ndGgpYnJlYWs7aT1uW3IrK119ZWxzZXtpZihyPW4ubmV4dCgpLHIuZG9uZSlicmVhaztpPXIudmFsdWV9dmFyIGE9aSx1PWUuZ2V0QXR0cmlidXRlKFwiZGF0YS12aW1lby1cIithKTsodXx8XCJcIj09PXUpJiYodFthXT1cIlwiPT09dT8xOnUpfXJldHVybiB0fWZ1bmN0aW9uIHAoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP3t9OmFyZ3VtZW50c1sxXTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixvKXtpZighYyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwi4oCcXCIrZStcIuKAnSBpcyBub3QgYSB2aW1lby5jb20gdXJsLlwiKTt2YXIgcj1cImh0dHBzOi8vdmltZW8uY29tL2FwaS9vZW1iZWQuanNvbj91cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGUpO2Zvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihyKz1cIiZcIitpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0W2ldKSk7dmFyIGE9XCJYRG9tYWluUmVxdWVzdFwiaW4gd2luZG93P25ldyBYRG9tYWluUmVxdWVzdDpuZXcgWE1MSHR0cFJlcXVlc3Q7YS5vcGVuKFwiR0VUXCIsciwhMCksYS5vbmxvYWQ9ZnVuY3Rpb24oKXtpZig0MDQ9PT1hLnN0YXR1cylyZXR1cm4gdm9pZCBvKG5ldyBFcnJvcihcIuKAnFwiK2UrXCLigJ0gd2FzIG5vdCBmb3VuZC5cIikpO2lmKDQwMz09PWEuc3RhdHVzKXJldHVybiB2b2lkIG8obmV3IEVycm9yKFwi4oCcXCIrZStcIuKAnSBpcyBub3QgZW1iZWRkYWJsZS5cIikpO3RyeXt2YXIgdD1KU09OLnBhcnNlKGEucmVzcG9uc2VUZXh0KTtuKHQpfWNhdGNoKGUpe28oZSl9fSxhLm9uZXJyb3I9ZnVuY3Rpb24oKXt2YXIgZT1hLnN0YXR1cz9cIiAoXCIrYS5zdGF0dXMrXCIpXCI6XCJcIjtvKG5ldyBFcnJvcihcIlRoZXJlIHdhcyBhbiBlcnJvciBmZXRjaGluZyB0aGUgZW1iZWQgY29kZSBmcm9tIFZpbWVvXCIrZStcIi5cIikpfSxhLnNlbmQoKX0pfWZ1bmN0aW9uIGgoZSx0KXt2YXIgbj1lLmh0bWw7aWYoIXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFuIGVsZW1lbnQgbXVzdCBiZSBwcm92aWRlZFwiKTtpZihudWxsIT09dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXZpbWVvLWluaXRpYWxpemVkXCIpKXJldHVybiB0LnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gby5pbm5lckhUTUw9bix0LmFwcGVuZENoaWxkKG8uZmlyc3RDaGlsZCksdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZpbWVvLWluaXRpYWxpemVkXCIsXCJ0cnVlXCIpLHQucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKX1mdW5jdGlvbiBkKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP2RvY3VtZW50OmFyZ3VtZW50c1swXSx0PVtdLnNsaWNlLmNhbGwoZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdmltZW8taWRdLCBbZGF0YS12aW1lby11cmxdXCIpKSxuPWZ1bmN0aW9uKGUpe1wiY29uc29sZVwiaW4gd2luZG93JiZjb25zb2xlLmVycm9yJiZjb25zb2xlLmVycm9yKFwiVGhlcmUgd2FzIGFuIGVycm9yIGNyZWF0aW5nIGFuIGVtYmVkOiBcIitlKX0sbz1mdW5jdGlvbigpe2lmKGkpe2lmKGE+PXIubGVuZ3RoKXJldHVyblwiYnJlYWtcIjt1PXJbYSsrXX1lbHNle2lmKGE9ci5uZXh0KCksYS5kb25lKXJldHVyblwiYnJlYWtcIjt1PWEudmFsdWV9dmFyIGU9dTt0cnl7aWYobnVsbCE9PWUuZ2V0QXR0cmlidXRlKFwiZGF0YS12aW1lby1kZWZlclwiKSlyZXR1cm5cImNvbnRpbnVlXCI7dmFyIHQ9bChlKSxvPWYodCk7cChvLHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGgodCxlKX0pLmNhdGNoKG4pfWNhdGNoKGUpe24oZSl9fTtlOmZvcih2YXIgcj10LGk9QXJyYXkuaXNBcnJheShyKSxhPTAscj1pP3I6cltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHUscz1vKCk7c3dpdGNoKHMpe2Nhc2VcImJyZWFrXCI6YnJlYWsgZTtjYXNlXCJjb250aW51ZVwiOmNvbnRpbnVlfX19ZnVuY3Rpb24geShlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9SlNPTi5wYXJzZShlKSksZX1mdW5jdGlvbiB2KGUsdCxuKXtpZihlLmVsZW1lbnQuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSl7dmFyIG89e21ldGhvZDp0fTt2b2lkIDAhPT1uJiYoby52YWx1ZT1uKTt2YXIgcj1wYXJzZUZsb2F0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eLiptc2llIChcXGQrKS4qJC8sXCIkMVwiKSk7cj49OCYmcjwxMCYmKG89SlNPTi5zdHJpbmdpZnkobykpLGUuZWxlbWVudC5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG8sZS5vcmlnaW4pfX1mdW5jdGlvbiBtKGUsdCl7dD15KHQpO3ZhciBuPVtdLGk9dm9pZCAwO2lmKHQuZXZlbnQpe2lmKFwiZXJyb3JcIj09PXQuZXZlbnQpZm9yKHZhciBhPW8oZSx0LmRhdGEubWV0aG9kKSx1PWEscz1BcnJheS5pc0FycmF5KHUpLGM9MCx1PXM/dTp1W1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgZjtpZihzKXtpZihjPj11Lmxlbmd0aClicmVhaztmPXVbYysrXX1lbHNle2lmKGM9dS5uZXh0KCksYy5kb25lKWJyZWFrO2Y9Yy52YWx1ZX12YXIgbD1mLHA9bmV3IEVycm9yKHQuZGF0YS5tZXNzYWdlKTtwLm5hbWU9dC5kYXRhLm5hbWUsbC5yZWplY3QocCkscihlLHQuZGF0YS5tZXRob2QsbCl9bj1vKGUsXCJldmVudDpcIit0LmV2ZW50KSxpPXQuZGF0YX1lbHNlIHQubWV0aG9kJiYobj1vKGUsdC5tZXRob2QpLGk9dC52YWx1ZSxyKGUsdC5tZXRob2QpKTtmb3IodmFyIGg9bixkPUFycmF5LmlzQXJyYXkoaCksdj0wLGg9ZD9oOmhbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBtO2lmKGQpe2lmKHY+PWgubGVuZ3RoKWJyZWFrO209aFt2KytdfWVsc2V7aWYodj1oLm5leHQoKSx2LmRvbmUpYnJlYWs7bT12LnZhbHVlfXZhciBnPW07dHJ5e2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGcpe2cuY2FsbChlLGkpO2NvbnRpbnVlfWcucmVzb2x2ZShpKX1jYXRjaChlKXt9fX12YXIgZz1cInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXkucHJvdG90eXBlLmluZGV4T2Ysdz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93LnBvc3RNZXNzYWdlO2lmKCFnfHwhdyl0aHJvdyBuZXcgRXJyb3IoXCJTb3JyeSwgdGhlIFZpbWVvIFBsYXllciBBUEkgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGJyb3dzZXIuXCIpO3ZhciBfPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBlP2U6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp7fSxiPSh0KGZ1bmN0aW9uKGUsdCl7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtmdW5jdGlvbiBvKGUpe3JldHVybiB0aGlzJiZ0aGlzLmNvbnN0cnVjdG9yPT09bz8odGhpcy5fa2V5cz1bXSx0aGlzLl92YWx1ZXM9W10sdGhpcy5faXRwPVtdLHRoaXMub2JqZWN0T25seT10LHZvaWQoZSYmbi5jYWxsKHRoaXMsZSkpKTpuZXcgbyhlKX1yZXR1cm4gdHx8dyhlLFwic2l6ZVwiLHtnZXQ6dn0pLGUuY29uc3RydWN0b3I9byxvLnByb3RvdHlwZT1lLG99ZnVuY3Rpb24gbihlKXt0aGlzLmFkZD9lLmZvckVhY2godGhpcy5hZGQsdGhpcyk6ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMuc2V0KGVbMF0sZVsxXSl9LHRoaXMpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIHRoaXMuaGFzKGUpJiYodGhpcy5fa2V5cy5zcGxpY2UoZywxKSx0aGlzLl92YWx1ZXMuc3BsaWNlKGcsMSksdGhpcy5faXRwLmZvckVhY2goZnVuY3Rpb24oZSl7ZzxlWzBdJiZlWzBdLS19KSksLTE8Z31mdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmhhcyhlKT90aGlzLl92YWx1ZXNbZ106dm9pZCAwfWZ1bmN0aW9uIGkoZSx0KXtpZih0aGlzLm9iamVjdE9ubHkmJnQhPT1PYmplY3QodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdmFsdWUgdXNlZCBhcyB3ZWFrIGNvbGxlY3Rpb24ga2V5XCIpO2lmKHQhPXR8fDA9PT10KWZvcihnPWUubGVuZ3RoO2ctLSYmIV8oZVtnXSx0KTspO2Vsc2UgZz1lLmluZGV4T2YodCk7cmV0dXJuLTE8Z31mdW5jdGlvbiBhKGUpe3JldHVybiBpLmNhbGwodGhpcyx0aGlzLl92YWx1ZXMsZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gaS5jYWxsKHRoaXMsdGhpcy5fa2V5cyxlKX1mdW5jdGlvbiBzKGUsdCl7cmV0dXJuIHRoaXMuaGFzKGUpP3RoaXMuX3ZhbHVlc1tnXT10OnRoaXMuX3ZhbHVlc1t0aGlzLl9rZXlzLnB1c2goZSktMV09dCx0aGlzfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIHRoaXMuaGFzKGUpfHx0aGlzLl92YWx1ZXMucHVzaChlKSx0aGlzfWZ1bmN0aW9uIGYoKXsodGhpcy5fa2V5c3x8MCkubGVuZ3RoPXRoaXMuX3ZhbHVlcy5sZW5ndGg9MH1mdW5jdGlvbiBsKCl7cmV0dXJuIHkodGhpcy5faXRwLHRoaXMuX2tleXMpfWZ1bmN0aW9uIHAoKXtyZXR1cm4geSh0aGlzLl9pdHAsdGhpcy5fdmFsdWVzKX1mdW5jdGlvbiBoKCl7cmV0dXJuIHkodGhpcy5faXRwLHRoaXMuX2tleXMsdGhpcy5fdmFsdWVzKX1mdW5jdGlvbiBkKCl7cmV0dXJuIHkodGhpcy5faXRwLHRoaXMuX3ZhbHVlcyx0aGlzLl92YWx1ZXMpfWZ1bmN0aW9uIHkoZSx0LG4pe3ZhciBvPVswXSxyPSExO3JldHVybiBlLnB1c2gobykse25leHQ6ZnVuY3Rpb24oKXt2YXIgaSxhPW9bMF07cmV0dXJuIXImJmE8dC5sZW5ndGg/KGk9bj9bdFthXSxuW2FdXTp0W2FdLG9bMF0rKyk6KHI9ITAsZS5zcGxpY2UoZS5pbmRleE9mKG8pLDEpKSx7ZG9uZTpyLHZhbHVlOml9fX19ZnVuY3Rpb24gdigpe3JldHVybiB0aGlzLl92YWx1ZXMubGVuZ3RofWZ1bmN0aW9uIG0oZSx0KXtmb3IodmFyIG49dGhpcy5lbnRyaWVzKCk7Oyl7dmFyIG89bi5uZXh0KCk7aWYoby5kb25lKWJyZWFrO2UuY2FsbCh0LG8udmFsdWVbMV0sby52YWx1ZVswXSx0aGlzKX19dmFyIGcsdz1PYmplY3QuZGVmaW5lUHJvcGVydHksXz1mdW5jdGlvbihlLHQpe3JldHVybiBlPT09dHx8ZSE9PWUmJnQhPT10fTtcInVuZGVmaW5lZFwiPT10eXBlb2YgV2Vha01hcCYmKGUuV2Vha01hcD10KHtkZWxldGU6byxjbGVhcjpmLGdldDpyLGhhczp1LHNldDpzfSwhMCkpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXAmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG5ldyBNYXApLnZhbHVlcyYmKG5ldyBNYXApLnZhbHVlcygpLm5leHR8fChlLk1hcD10KHtkZWxldGU6byxoYXM6dSxnZXQ6cixzZXQ6cyxrZXlzOmwsdmFsdWVzOnAsZW50cmllczpoLGZvckVhY2g6bSxjbGVhcjpmfSkpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTZXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG5ldyBTZXQpLnZhbHVlcyYmKG5ldyBTZXQpLnZhbHVlcygpLm5leHR8fChlLlNldD10KHtoYXM6YSxhZGQ6YyxkZWxldGU6byxjbGVhcjpmLGtleXM6cCx2YWx1ZXM6cCxlbnRyaWVzOmQsZm9yRWFjaDptfSkpLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXZWFrU2V0JiYoZS5XZWFrU2V0PXQoe2RlbGV0ZTpvLGFkZDpjLGNsZWFyOmYsaGFzOmF9LCEwKSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgXz9fOndpbmRvdyl9KSx0KGZ1bmN0aW9uKGUpeyFmdW5jdGlvbih0LG4sbyl7blt0XT1uW3RdfHxvKCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJmUuZXhwb3J0cz9lLmV4cG9ydHM9blt0XTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShmdW5jdGlvbigpe3JldHVybiBuW3RdfSl9KFwiUHJvbWlzZVwiLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBfP186XyxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtwLmFkZChlLHQpLGx8fChsPWQocC5kcmFpbikpfWZ1bmN0aW9uIHQoZSl7dmFyIHQsbj10eXBlb2YgZTtyZXR1cm4gbnVsbD09ZXx8XCJvYmplY3RcIiE9biYmXCJmdW5jdGlvblwiIT1ufHwodD1lLnRoZW4pLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnR9ZnVuY3Rpb24gbigpe2Zvcih2YXIgZT0wO2U8dGhpcy5jaGFpbi5sZW5ndGg7ZSsrKW8odGhpcywxPT09dGhpcy5zdGF0ZT90aGlzLmNoYWluW2VdLnN1Y2Nlc3M6dGhpcy5jaGFpbltlXS5mYWlsdXJlLHRoaXMuY2hhaW5bZV0pO3RoaXMuY2hhaW4ubGVuZ3RoPTB9ZnVuY3Rpb24gbyhlLG4sbyl7dmFyIHIsaTt0cnl7bj09PSExP28ucmVqZWN0KGUubXNnKToocj1uPT09ITA/ZS5tc2c6bi5jYWxsKHZvaWQgMCxlLm1zZykscj09PW8ucHJvbWlzZT9vLnJlamVjdChUeXBlRXJyb3IoXCJQcm9taXNlLWNoYWluIGN5Y2xlXCIpKTooaT10KHIpKT9pLmNhbGwocixvLnJlc29sdmUsby5yZWplY3QpOm8ucmVzb2x2ZShyKSl9Y2F0Y2goZSl7by5yZWplY3QoZSl9fWZ1bmN0aW9uIHIobyl7dmFyIGEscz10aGlzO2lmKCFzLnRyaWdnZXJlZCl7cy50cmlnZ2VyZWQ9ITAscy5kZWYmJihzPXMuZGVmKTt0cnl7KGE9dChvKSk/ZShmdW5jdGlvbigpe3ZhciBlPW5ldyB1KHMpO3RyeXthLmNhbGwobyxmdW5jdGlvbigpe3IuYXBwbHkoZSxhcmd1bWVudHMpfSxmdW5jdGlvbigpe2kuYXBwbHkoZSxhcmd1bWVudHMpfSl9Y2F0Y2godCl7aS5jYWxsKGUsdCl9fSk6KHMubXNnPW8scy5zdGF0ZT0xLHMuY2hhaW4ubGVuZ3RoPjAmJmUobixzKSl9Y2F0Y2goZSl7aS5jYWxsKG5ldyB1KHMpLGUpfX19ZnVuY3Rpb24gaSh0KXt2YXIgbz10aGlzO28udHJpZ2dlcmVkfHwoby50cmlnZ2VyZWQ9ITAsby5kZWYmJihvPW8uZGVmKSxvLm1zZz10LG8uc3RhdGU9MixvLmNoYWluLmxlbmd0aD4wJiZlKG4sbykpfWZ1bmN0aW9uIGEoZSx0LG4sbyl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspIWZ1bmN0aW9uKHIpe2UucmVzb2x2ZSh0W3JdKS50aGVuKGZ1bmN0aW9uKGUpe24ocixlKX0sbyl9KHIpfWZ1bmN0aW9uIHUoZSl7dGhpcy5kZWY9ZSx0aGlzLnRyaWdnZXJlZD0hMX1mdW5jdGlvbiBzKGUpe3RoaXMucHJvbWlzZT1lLHRoaXMuc3RhdGU9MCx0aGlzLnRyaWdnZXJlZD0hMSx0aGlzLmNoYWluPVtdLHRoaXMubXNnPXZvaWQgMH1mdW5jdGlvbiBjKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKFwiTm90IGEgZnVuY3Rpb25cIik7aWYoMCE9PXRoaXMuX19OUE9fXyl0aHJvdyBUeXBlRXJyb3IoXCJOb3QgYSBwcm9taXNlXCIpO3RoaXMuX19OUE9fXz0xO3ZhciBvPW5ldyBzKHRoaXMpO3RoaXMudGhlbj1mdW5jdGlvbih0LHIpe3ZhciBpPXtzdWNjZXNzOlwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fHQsZmFpbHVyZTpcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiZyfTtyZXR1cm4gaS5wcm9taXNlPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IoXCJOb3QgYSBmdW5jdGlvblwiKTtpLnJlc29sdmU9ZSxpLnJlamVjdD10fSksby5jaGFpbi5wdXNoKGkpLDAhPT1vLnN0YXRlJiZlKG4sbyksaS5wcm9taXNlfSx0aGlzLmNhdGNoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfTt0cnl7dC5jYWxsKHZvaWQgMCxmdW5jdGlvbihlKXtyLmNhbGwobyxlKX0sZnVuY3Rpb24oZSl7aS5jYWxsKG8sZSl9KX1jYXRjaChlKXtpLmNhbGwobyxlKX19dmFyIGYsbCxwLGg9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxkPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZXRJbW1lZGlhdGU/ZnVuY3Rpb24oZSl7cmV0dXJuIHNldEltbWVkaWF0ZShlKX06c2V0VGltZW91dDt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwieFwiLHt9KSxmPWZ1bmN0aW9uKGUsdCxuLG8pe3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTpvIT09ITF9KX19Y2F0Y2goZSl7Zj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGVbdF09bixlfX1wPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuZm49ZSx0aGlzLnNlbGY9dCx0aGlzLm5leHQ9dm9pZCAwfXZhciB0LG4sbztyZXR1cm57YWRkOmZ1bmN0aW9uKHIsaSl7bz1uZXcgZShyLGkpLG4/bi5uZXh0PW86dD1vLG49byxvPXZvaWQgMH0sZHJhaW46ZnVuY3Rpb24oKXt2YXIgZT10O2Zvcih0PW49bD12b2lkIDA7ZTspZS5mbi5jYWxsKGUuc2VsZiksZT1lLm5leHR9fX0oKTt2YXIgeT1mKHt9LFwiY29uc3RydWN0b3JcIixjLCExKTtyZXR1cm4gYy5wcm90b3R5cGU9eSxmKHksXCJfX05QT19fXCIsMCwhMSksZihjLFwicmVzb2x2ZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiYxPT09ZS5fX05QT19fP2U6bmV3IHQoZnVuY3Rpb24odCxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBuKXRocm93IFR5cGVFcnJvcihcIk5vdCBhIGZ1bmN0aW9uXCIpO3QoZSl9KX0pLGYoYyxcInJlamVjdFwiLGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdGhpcyhmdW5jdGlvbih0LG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4pdGhyb3cgVHlwZUVycm9yKFwiTm90IGEgZnVuY3Rpb25cIik7bihlKX0pfSksZihjLFwiYWxsXCIsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm5cIltvYmplY3QgQXJyYXldXCIhPWguY2FsbChlKT90LnJlamVjdChUeXBlRXJyb3IoXCJOb3QgYW4gYXJyYXlcIikpOjA9PT1lLmxlbmd0aD90LnJlc29sdmUoW10pOm5ldyB0KGZ1bmN0aW9uKG4sbyl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbnx8XCJmdW5jdGlvblwiIT10eXBlb2Ygbyl0aHJvdyBUeXBlRXJyb3IoXCJOb3QgYSBmdW5jdGlvblwiKTt2YXIgcj1lLmxlbmd0aCxpPUFycmF5KHIpLHU9MDthKHQsZSxmdW5jdGlvbihlLHQpe2lbZV09dCwrK3U9PT1yJiZuKGkpfSxvKX0pfSksZihjLFwicmFjZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiIT1oLmNhbGwoZSk/dC5yZWplY3QoVHlwZUVycm9yKFwiTm90IGFuIGFycmF5XCIpKTpuZXcgdChmdW5jdGlvbihuLG8pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG58fFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8pdGhyb3cgVHlwZUVycm9yKFwiTm90IGEgZnVuY3Rpb25cIik7YSh0LGUsZnVuY3Rpb24oZSx0KXtuKHQpfSxvKX0pfSksY30pfSkpLFQ9YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJlwiZGVmYXVsdFwiaW4gYj9iLmRlZmF1bHQ6YixFPW5ldyBXZWFrTWFwLFM9W1wiaWRcIixcInVybFwiLFwid2lkdGhcIixcIm1heHdpZHRoXCIsXCJoZWlnaHRcIixcIm1heGhlaWdodFwiLFwicG9ydHJhaXRcIixcInRpdGxlXCIsXCJieWxpbmVcIixcImNvbG9yXCIsXCJhdXRvcGxheVwiLFwiYXV0b3BhdXNlXCIsXCJsb29wXCIsXCJyZXNwb25zaXZlXCJdLHg9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSxrPW5ldyBXZWFrTWFwLGo9bmV3IFdlYWtNYXAsTT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dmFyIG49dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT97fTphcmd1bWVudHNbMV07aWYoeCh0aGlzLGUpLHdpbmRvdy5qUXVlcnkmJnQgaW5zdGFuY2VvZiBqUXVlcnkmJih0Lmxlbmd0aD4xJiZ3aW5kb3cuY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oXCJBIGpRdWVyeSBvYmplY3Qgd2l0aCBtdWx0aXBsZSBlbGVtZW50cyB3YXMgcGFzc2VkLCB1c2luZyB0aGUgZmlyc3QgZWxlbWVudC5cIiksdD10WzBdKSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkpLCF1KHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGVpdGhlciBhIHZhbGlkIGVsZW1lbnQgb3IgYSB2YWxpZCBpZC5cIik7aWYoXCJJRlJBTUVcIiE9PXQubm9kZU5hbWUpe3ZhciByPXQucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtyJiYodD1yKX1pZihcIklGUkFNRVwiPT09dC5ub2RlTmFtZSYmIWModC5nZXRBdHRyaWJ1dGUoXCJzcmNcIil8fFwiXCIpKXRocm93IG5ldyBFcnJvcihcIlRoZSBwbGF5ZXIgZWxlbWVudCBwYXNzZWQgaXNu4oCZdCBhIFZpbWVvIGVtYmVkLlwiKTtpZihrLmhhcyh0KSlyZXR1cm4gay5nZXQodCk7dGhpcy5lbGVtZW50PXQsdGhpcy5vcmlnaW49XCIqXCI7dmFyIGE9bmV3IFQoZnVuY3Rpb24oZSxyKXt2YXIgYT1mdW5jdGlvbih0KXtpZihjKHQub3JpZ2luKSYmbi5lbGVtZW50LmNvbnRlbnRXaW5kb3c9PT10LnNvdXJjZSl7XCIqXCI9PT1uLm9yaWdpbiYmKG4ub3JpZ2luPXQub3JpZ2luKTt2YXIgbz15KHQuZGF0YSkscj1cImV2ZW50XCJpbiBvJiZcInJlYWR5XCI9PT1vLmV2ZW50LGk9XCJtZXRob2RcImluIG8mJlwicGluZ1wiPT09by5tZXRob2Q7cmV0dXJuIHJ8fGk/KG4uZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJlYWR5XCIsXCJ0cnVlXCIpLHZvaWQgZSgpKTp2b2lkIG0obixvKX19O2lmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyP3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGEsITEpOndpbmRvdy5hdHRhY2hFdmVudCYmd2luZG93LmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsYSksXCJJRlJBTUVcIiE9PW4uZWxlbWVudC5ub2RlTmFtZSl7dmFyIHU9bCh0LG8pLHM9Zih1KTtwKHMsdSkudGhlbihmdW5jdGlvbihlKXt2YXIgbz1oKGUsdCk7cmV0dXJuIG4uZWxlbWVudD1vLGkodCxvKSxlfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSl9KX19KTtyZXR1cm4gai5zZXQodGhpcyxhKSxrLnNldCh0aGlzLmVsZW1lbnQsdGhpcyksXCJJRlJBTUVcIj09PXRoaXMuZWxlbWVudC5ub2RlTmFtZSYmdih0aGlzLFwicGluZ1wiKSx0aGlzfXJldHVybiBlLnByb3RvdHlwZS50aGVuPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT9mdW5jdGlvbigpe306YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLnJlYWR5KCkudGhlbihlLHQpfSxlLnByb3RvdHlwZS5jYWxsTWV0aG9kPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbz1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/e306YXJndW1lbnRzWzFdO3JldHVybiBuZXcgVChmdW5jdGlvbihyLGkpe3JldHVybiB0LnJlYWR5KCkudGhlbihmdW5jdGlvbigpe24odCxlLHtyZXNvbHZlOnIscmVqZWN0Oml9KSx2KHQsZSxvKX0pfSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgVChmdW5jdGlvbihvLHIpe3JldHVybiBlPWEoZSxcImdldFwiKSx0LnJlYWR5KCkudGhlbihmdW5jdGlvbigpe24odCxlLHtyZXNvbHZlOm8scmVqZWN0OnJ9KSx2KHQsZSl9KX0pfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbz10aGlzO3JldHVybiBULnJlc29sdmUodCkudGhlbihmdW5jdGlvbih0KXtpZihlPWEoZSxcInNldFwiKSx2b2lkIDA9PT10fHxudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlcmUgbXVzdCBiZSBhIHZhbHVlIHRvIHNldC5cIik7cmV0dXJuIG8ucmVhZHkoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUKGZ1bmN0aW9uKHIsaSl7bihvLGUse3Jlc29sdmU6cixyZWplY3Q6aX0pLHYobyxlLHQpfSl9KX0pfSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGFuIGV2ZW50IG5hbWUuXCIpO2lmKCF0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGEgY2FsbGJhY2sgZnVuY3Rpb24uXCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3ZhciByPW8odGhpcyxcImV2ZW50OlwiK2UpOzA9PT1yLmxlbmd0aCYmdGhpcy5jYWxsTWV0aG9kKFwiYWRkRXZlbnRMaXN0ZW5lclwiLGUpLmNhdGNoKGZ1bmN0aW9uKCl7fSksbih0aGlzLFwiZXZlbnQ6XCIrZSx0KX0sZS5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gZXZlbnQgbmFtZS5cIik7aWYodCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7dmFyIG49cih0aGlzLFwiZXZlbnQ6XCIrZSx0KTtuJiZ0aGlzLmNhbGxNZXRob2QoXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsZSkuY2F0Y2goZnVuY3Rpb24oZSl7fSl9LGUucHJvdG90eXBlLmxvYWRWaWRlbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jYWxsTWV0aG9kKFwibG9hZFZpZGVvXCIsZSl9LGUucHJvdG90eXBlLnJlYWR5PWZ1bmN0aW9uKCl7dmFyIGU9ai5nZXQodGhpcyk7cmV0dXJuIFQucmVzb2x2ZShlKX0sZS5wcm90b3R5cGUuZW5hYmxlVGV4dFRyYWNrPWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYSBsYW5ndWFnZS5cIik7cmV0dXJuIHRoaXMuY2FsbE1ldGhvZChcImVuYWJsZVRleHRUcmFja1wiLHtsYW5ndWFnZTplLGtpbmQ6dH0pfSxlLnByb3RvdHlwZS5kaXNhYmxlVGV4dFRyYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbE1ldGhvZChcImRpc2FibGVUZXh0VHJhY2tcIil9LGUucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbE1ldGhvZChcInBhdXNlXCIpfSxlLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbE1ldGhvZChcInBsYXlcIil9LGUucHJvdG90eXBlLnVubG9hZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxNZXRob2QoXCJ1bmxvYWRcIil9LGUucHJvdG90eXBlLmdldEF1dG9wYXVzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImF1dG9wYXVzZVwiKX0sZS5wcm90b3R5cGUuc2V0QXV0b3BhdXNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldChcImF1dG9wYXVzZVwiLGUpfSxlLnByb3RvdHlwZS5nZXRDb2xvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImNvbG9yXCIpfSxlLnByb3RvdHlwZS5zZXRDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXQoXCJjb2xvclwiLGUpfSxlLnByb3RvdHlwZS5nZXRDdXJyZW50VGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImN1cnJlbnRUaW1lXCIpfSxlLnByb3RvdHlwZS5zZXRDdXJyZW50VGltZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXQoXCJjdXJyZW50VGltZVwiLGUpfSxlLnByb3RvdHlwZS5nZXREdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImR1cmF0aW9uXCIpfSxlLnByb3RvdHlwZS5nZXRFbmRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImVuZGVkXCIpfSxlLnByb3RvdHlwZS5nZXRMb29wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwibG9vcFwiKX0sZS5wcm90b3R5cGUuc2V0TG9vcD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXQoXCJsb29wXCIsZSl9LGUucHJvdG90eXBlLmdldFBhdXNlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInBhdXNlZFwiKX0sZS5wcm90b3R5cGUuZ2V0VGV4dFRyYWNrcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInRleHRUcmFja3NcIil9LGUucHJvdG90eXBlLmdldFZpZGVvRW1iZWRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidmlkZW9FbWJlZENvZGVcIil9LGUucHJvdG90eXBlLmdldFZpZGVvSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJ2aWRlb0lkXCIpfSxlLnByb3RvdHlwZS5nZXRWaWRlb1RpdGxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidmlkZW9UaXRsZVwiKX0sZS5wcm90b3R5cGUuZ2V0VmlkZW9XaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInZpZGVvV2lkdGhcIil9LGUucHJvdG90eXBlLmdldFZpZGVvSGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidmlkZW9IZWlnaHRcIil9LGUucHJvdG90eXBlLmdldFZpZGVvVXJsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidmlkZW9VcmxcIil9LGUucHJvdG90eXBlLmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInZvbHVtZVwiKX0sZS5wcm90b3R5cGUuc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldChcInZvbHVtZVwiLGUpfSxlfSgpO3JldHVybiBkKCksTX0pfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMjpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiByKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdD9lOnR9ZnVuY3Rpb24gYShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfWZ1bmN0aW9uIHUoKXtpZighZCl7ZD0hMDt2YXIgZT1cIlxcbiAgICAgIC52anMtdmltZW8gaWZyYW1lIHtcXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgICAgIHRvcDogMDtcXG4gICAgICAgIGxlZnQ6IDA7XFxuICAgICAgICB3aWR0aDogMTAwJTtcXG4gICAgICAgIGhlaWdodDogMTAwJTtcXG4gICAgICB9XFxuICAgIFwiLHQ9ZG9jdW1lbnQuaGVhZHx8ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO24udHlwZT1cInRleHQvY3NzXCIsbi5zdHlsZVNoZWV0P24uc3R5bGVTaGVldC5jc3NUZXh0PWU6bi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKSksdC5hcHBlbmRDaGlsZChuKX19bi5fX2VzTW9kdWxlPSEwO3ZhciBzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93LnZpZGVvanM6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQ/dC52aWRlb2pzOm51bGwsYz1vKHMpLGY9ZSgxKSxsPW8oZikscD1jLmRlZmF1bHQuZ2V0Q29tcG9uZW50KFwiQ29tcG9uZW50XCIpLGg9Yy5kZWZhdWx0LmdldENvbXBvbmVudChcIlRlY2hcIiksZD0hMSx5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobixvKXtyKHRoaXMsdCk7dmFyIGE9aSh0aGlzLGUuY2FsbCh0aGlzLG4sbykpO3JldHVybiB1KCksYS5zZXRQb3N0ZXIobi5wb3N0ZXIpLGEuaW5pdFZpbWVvUGxheWVyKCksYX1yZXR1cm4gYSh0LGUpLHQucHJvdG90eXBlLmluaXRWaW1lb1BsYXllcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dXJsOnRoaXMub3B0aW9uc18uc291cmNlLnNyYyxieWxpbmU6ITEscG9ydHJhaXQ6ITEsdGl0bGU6ITF9O3RoaXMub3B0aW9uc18uYXV0b3BsYXkmJih0LmF1dG9wbGF5PSEwKSx0aGlzLm9wdGlvbnNfLmhlaWdodCYmKHQuaGVpZ2h0PXRoaXMub3B0aW9uc18uaGVpZ2h0KSx0aGlzLm9wdGlvbnNfLndpZHRoJiYodC53aWR0aD10aGlzLm9wdGlvbnNfLndpZHRoKSx0aGlzLm9wdGlvbnNfLm1heGhlaWdodCYmKHQubWF4aGVpZ2h0PXRoaXMub3B0aW9uc18ubWF4aGVpZ2h0KSx0aGlzLm9wdGlvbnNfLm1heHdpZHRoJiYodC5tYXh3aWR0aD10aGlzLm9wdGlvbnNfLm1heHdpZHRoKSx0aGlzLm9wdGlvbnNfLmxvb3AmJih0Lmxvb3A9dGhpcy5vcHRpb25zXy5sb29wKSx0aGlzLl9wbGF5ZXI9bmV3IGwuZGVmYXVsdCh0aGlzLmVsKCksdCksdGhpcy5pbml0VmltZW9TdGF0ZSgpLFtcInBsYXlcIixcInBhdXNlXCIsXCJlbmRlZFwiLFwidGltZXVwZGF0ZVwiLFwicHJvZ3Jlc3NcIixcInNlZWtlZFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX3BsYXllci5vbih0LGZ1bmN0aW9uKG4pe2UuX3ZpbWVvU3RhdGUucHJvZ3Jlc3MuZHVyYXRpb24hPW4uZHVyYXRpb24mJmUudHJpZ2dlcihcImR1cmF0aW9uY2hhbmdlXCIpLGUuX3ZpbWVvU3RhdGUucHJvZ3Jlc3M9bixlLnRyaWdnZXIodCl9KX0pLHRoaXMuX3BsYXllci5vbihcInBhdXNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gZS5fdmltZW9TdGF0ZS5wbGF5aW5nPSExfSksdGhpcy5fcGxheWVyLm9uKFwicGxheVwiLGZ1bmN0aW9uKCl7ZS5fdmltZW9TdGF0ZS5wbGF5aW5nPSEwLGUuX3ZpbWVvU3RhdGUuZW5kZWQ9ITF9KSx0aGlzLl9wbGF5ZXIub24oXCJlbmRlZFwiLGZ1bmN0aW9uKCl7ZS5fdmltZW9TdGF0ZS5wbGF5aW5nPSExLGUuX3ZpbWVvU3RhdGUuZW5kZWQ9ITB9KSx0aGlzLl9wbGF5ZXIub24oXCJ2b2x1bWVjaGFuZ2VcIixmdW5jdGlvbih0KXtyZXR1cm4gZS5fdmltZW9TdGF0ZS52b2x1bWU9dH0pLHRoaXMuX3BsYXllci5vbihcImVycm9yXCIsZnVuY3Rpb24odCl7cmV0dXJuIGUudHJpZ2dlcihcImVycm9yXCIsdCl9KSx0aGlzLnRyaWdnZXJSZWFkeSgpfSx0LnByb3RvdHlwZS5pbml0VmltZW9TdGF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3ZpbWVvU3RhdGU9e2VuZGVkOiExLHBsYXlpbmc6ITEsdm9sdW1lOjAscHJvZ3Jlc3M6e3NlY29uZHM6MCxwZXJjZW50OjAsZHVyYXRpb246MH19O3RoaXMuX3BsYXllci5nZXRDdXJyZW50VGltZSgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUucHJvZ3Jlc3Muc2Vjb25kcz10fSksdGhpcy5fcGxheWVyLmdldER1cmF0aW9uKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5wcm9ncmVzcy5kdXJhdGlvbj10fSksdGhpcy5fcGxheWVyLmdldFBhdXNlZCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUucGxheWluZz0hdH0pLHRoaXMuX3BsYXllci5nZXRWb2x1bWUoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLnZvbHVtZT10fSl9LHQucHJvdG90eXBlLmNyZWF0ZUVsPWZ1bmN0aW9uKCl7dmFyIGU9Yy5kZWZhdWx0LmNyZWF0ZUVsKFwiZGl2XCIse2lkOnRoaXMub3B0aW9uc18udGVjaElkfSk7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dD1cIndpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDowO3Bvc2l0aW9uOmFic29sdXRlXCIsZS5jbGFzc05hbWU9XCJ2anMtdmltZW9cIixlfSx0LnByb3RvdHlwZS5jb250cm9scz1mdW5jdGlvbigpe3JldHVybiEwfSx0LnByb3RvdHlwZS5zdXBwb3J0c0Z1bGxTY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4hMH0sdC5wcm90b3R5cGUuc3JjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc18uc291cmNlfSx0LnByb3RvdHlwZS5jdXJyZW50U3JjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc18uc291cmNlLnNyY30sdC5wcm90b3R5cGUuY3VycmVudFRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmltZW9TdGF0ZS5wcm9ncmVzcy5zZWNvbmRzfSx0LnByb3RvdHlwZS5zZXRDdXJyZW50VGltZT1mdW5jdGlvbihlKXt0aGlzLl9wbGF5ZXIuc2V0Q3VycmVudFRpbWUoZSl9LHQucHJvdG90eXBlLnZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl92aW1lb1N0YXRlLnZvbHVtZX0sdC5wcm90b3R5cGUuc2V0Vm9sdW1lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wbGF5ZXIuc2V0Vm9sdW1lKHZvbHVtZSl9LHQucHJvdG90eXBlLmR1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZpbWVvU3RhdGUucHJvZ3Jlc3MuZHVyYXRpb259LHQucHJvdG90eXBlLmJ1ZmZlcmVkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdmltZW9TdGF0ZS5wcm9ncmVzcztyZXR1cm4gYy5kZWZhdWx0LmNyZWF0ZVRpbWVSYW5nZSgwLGUucGVyY2VudCplLmR1cmF0aW9uKX0sdC5wcm90b3R5cGUucGF1c2VkPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX3ZpbWVvU3RhdGUucGxheWluZ30sdC5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9wbGF5ZXIucGF1c2UoKX0sdC5wcm90b3R5cGUucGxheT1mdW5jdGlvbigpe3RoaXMuX3BsYXllci5wbGF5KCl9LHQucHJvdG90eXBlLm11dGVkPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl92aW1lb1N0YXRlLnZvbHVtZX0sdC5wcm90b3R5cGUuZW5kZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmltZW9TdGF0ZS5lbmRlZH0sdH0oaCk7eS5wcm90b3R5cGUuZmVhdHVyZXNUaW1ldXBkYXRlRXZlbnRzPSEwLHkuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH0saC53aXRoU291cmNlSGFuZGxlcnMoeSkseS5uYXRpdmVTb3VyY2VIYW5kbGVyPXt9LHkubmF0aXZlU291cmNlSGFuZGxlci5jYW5QbGF5VHlwZT1mdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvL3ZpbWVvXCI9PT1lP1wibWF5YmVcIjpcIlwifSx5Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuY2FuSGFuZGxlU291cmNlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU/eS5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlKGUudHlwZSk6ZS5zcmM/eS5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlKGUuc3JjKTpcIlwifSx5Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuaGFuZGxlU291cmNlPWZ1bmN0aW9uKGUsdCl7dC5zcmMoZS5zcmMpfSx5Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuZGlzcG9zZT1mdW5jdGlvbigpe30seS5yZWdpc3RlclNvdXJjZUhhbmRsZXIoeS5uYXRpdmVTb3VyY2VIYW5kbGVyKSxwLnJlZ2lzdGVyQ29tcG9uZW50KFwiVmltZW9cIix5KSxoLnJlZ2lzdGVyVGVjaChcIlZpbWVvXCIseSkseS5WRVJTSU9OPVwiMC4wLjFcIixuLmRlZmF1bHQ9eX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dfSx7fSxbMl0pOyJdLCJmaWxlIjoibGlicy92aWRlb2pzLXZpbWVvLm1pbi5qcyJ9
